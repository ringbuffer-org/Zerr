#N canvas 45 38 1354 916 12;
#X floatatom 331 402 5 0 100 0 - - - 0;
#X obj 331 424 / 100;
#X floatatom 192 396 5 0 100 0 - - - 0;
#X obj 192 422 / 100;
#X obj 30 402 snapshot~;
#X obj 30 375 metro 100;
#X obj 30 351 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 30 451 vsl 19 162 0 1 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#N canvas 1709 -138 685 329 reference 0;
#X obj 18 52 cnv 5 550 5 empty empty INLET: 8 18 0 13 #202020 #000000 0;
#X obj 18 130 cnv 2 550 2 empty empty OUTLET: 8 12 0 13 #202020 #000000 0;
#X obj 17 174 cnv 2 550 2 empty empty ARGUMENTS: 8 12 0 13 #202020 #000000 0;
#X obj 18 219 cnv 5 550 5 empty empty empty 8 18 0 13 #202020 #000000 0;
#X text 90 152 ...;
#X obj 22 17 zerr_envelopes~ trajectory circulation_8;
#X text 311 17 - generate envelopes through different strategies;
#X text 90 134 signal - envelopes for each speaker;
#X text 112 178 symbol - the envelope generation strategy(trajectory/trigger), f 64;
#X text 112 197 symbol - speaker array configuration file path, f 64;
#X text 89 61 signal - trigger or trajectory mapping;
#X text 89 81 signal - spread parameter for sound width;
#X text 89 100 signal - overall envelopes gain;
#X restore 10 820 pd reference;
#X text 104 820 <= click;
#X obj 14 1 cnv 1 520 1 empty empty empty 8 12 0 13 #000000 #000000 0;
#X obj 9 808 cnv 1 520 1 empty empty empty 8 12 0 13 #000000 #000000 0;
#X msg 422 393 \; pd dsp \$1;
#X text 460 363 DSP on/off;
#N canvas 2566 -231 499 459 set-dsp-tgl 0;
#X msg 241 138 set 0;
#X msg 182 109 set 1;
#X obj 182 172 s \$0-set-tgl;
#X obj 182 202 r \$0-tgl;
#X obj 182 246 outlet;
#X obj 105 106 tgl 20 0 \$0-tgl \$0-set-tgl empty 0 -10 0 12 #dfdfdf #000000 #000000 0 1;
#X text 28 17 This is a simple helper abstraction for the Pd docs that sets the toggle according to the DSP state., f 42;
#N canvas 172 166 401 276 pd-messages 0;
#X obj 101 75 inlet;
#X obj 101 133 pdcontrol;
#X msg 101 105 dir;
#X msg 101 163 \; pd open pd-messages.pd \$1;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X restore 237 389 pd pd-messages;
#X obj 182 80 receive pd-dsp-started;
#X obj 241 109 receive pd-dsp-stopped;
#X text 46 302 The trick is to rely on these messages sent by Pd. For more details on these and other messages that Pd sends or receives \, click here --->, f 39;
#X obj 237 353 bng 21 250 50 0 empty empty empty 0 -10 0 12 #dfdfdf #000000 #000000;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 8 0 1 0;
#X connect 9 0 0 0;
#X connect 11 0 7 0;
#X coords 0 -1 1 1 30 30 2 100 100;
#X restore 422 355 pd set-dsp-tgl;
#X obj 15 -28 zerr_envelopes~ trajectory circulation_8;
#N canvas 101 63 1266 805 view 0;
#X obj 42 55 snapshot~;
#X obj 252 4 metro 100;
#X obj 327 122 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 111 121 vsl 19 162 0 1 0 0 empty empty 1 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 125 56 snapshot~;
#X obj 137 121 vsl 19 162 0 1 0 0 empty empty 2 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 211 57 snapshot~;
#X obj 163 121 vsl 19 162 0 1 0 0 empty empty 3 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 307 63 snapshot~;
#X obj 191 121 vsl 19 162 0 1 0 0 empty empty 4 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 400 64 snapshot~;
#X obj 220 121 vsl 19 162 0 1 0 0 empty empty 5 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 483 65 snapshot~;
#X obj 246 122 vsl 19 162 0 1 0 0 empty empty 6 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 569 66 snapshot~;
#X obj 271 122 vsl 19 162 0 1 0 0 empty empty 7 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 650 66 snapshot~;
#X obj 297 123 vsl 19 162 0 1 0 0 empty empty 8 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 562 246 inlet~;
#X obj 631 244 inlet~;
#X obj 1100 249 inlet~;
#X obj 1015 250 inlet~;
#X obj 920 248 inlet~;
#X obj 844 249 inlet~;
#X obj 780 248 inlet~;
#X obj 706 246 inlet~;
#X connect 0 0 3 0;
#X connect 1 0 0 0;
#X connect 1 0 4 0;
#X connect 1 0 6 0;
#X connect 1 0 8 0;
#X connect 1 0 10 0;
#X connect 1 0 12 0;
#X connect 1 0 14 0;
#X connect 1 0 16 0;
#X connect 2 0 1 0;
#X connect 4 0 5 0;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 14 0 15 0;
#X connect 16 0 17 0;
#X connect 18 0 0 0;
#X connect 19 0 4 0;
#X connect 20 0 16 0;
#X connect 21 0 14 0;
#X connect 22 0 12 0;
#X connect 23 0 10 0;
#X connect 24 0 8 0;
#X connect 25 0 6 0;
#X coords 0 -1 1 1 284 196 2 100 100;
#X restore 54 608 pd view;
#X text 307 -29 - generate envelopes through different strategies;
#X obj 331 355 loadbang;
#X obj 192 369 loadbang;
#N canvas 157 38 1355 830 source 0;
#X obj 50 191 phasor~ 0.1;
#X msg 213 159 0;
#X obj 50 222 *~ 2;
#X obj 138 222 *~ 2;
#X obj 50 253 -~ 1;
#X obj 138 253 -~ 1;
#X obj 50 286 clip~ 0 1;
#X obj 138 286 clip~ 0 1;
#X obj 50 326 +~, f 13;
#X obj 67 152 * -1;
#X obj 138 191 phasor~ 0.1;
#X obj 49 123 / 100;
#X obj 213 129 loadbang;
#X obj 49 73 loadbang;
#X obj 50 357 outlet~;
#X msg 49 99 10;
#X connect 0 0 2 0;
#X connect 1 0 0 1;
#X connect 1 0 10 1;
#X connect 2 0 4 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 7 0 8 1;
#X connect 8 0 14 0;
#X connect 9 0 10 0;
#X connect 10 0 3 0;
#X connect 11 0 0 0;
#X connect 11 0 9 0;
#X connect 12 0 1 0;
#X connect 13 0 15 0;
#X connect 15 0 11 0;
#X restore 54 351 pd source signal;
#X msg 331 379 100;
#X text 12 185 Messages to set the trajectory vector \, set topological matrix \, active or disable speakers are available. (ps. the message functions are still in development.), f 74;
#X text 12 86 First argument chooses the envelope generation strategy: "trajectory" and "trigger". The second parameter is the path to the speaker array configuration file. It accepts .yaml file as input., f 74;
#X text 12 130 The number of outlets is automatically assigned by the speaker array configuration. It's equal to the number of speakers. The order of outlets is as same as the order of speakers. The outlets send envelope signals in audio rate., f 74;
#X text 12 5 The [zerr_envelopes~] generate envelopes according to input signals and the speaker array setups. All the input signals and output signals are in audio rate. The first inlet receives main input signal as trigger[0 or 1] or trajectory mapping[0.0 - 1.0]. The second inlet controls the spread parameter. How width the the sound distributed to. The third inlet controls the overall envelope gain., f 74;
#X text 12 226 In the help patch \, a source signal pendeling between 0 and 1 is generated. The [zerr_envelopes~] is in trajectory mode and uses a typical 8 speaker ring configuration. That connected in serial order in default. 1->2->3->4->5->6->7->8. For simplicity \, the spread and gain are linked to the float number. The envelope center moves from 1 to 8 when the source signal from 0 to 1.0. You can click on the set trajectory messages to change the mapping oder or use the active-speaker message to add/del speakers(buggy), f 74;
#X msg 85 448 traj set 1 8 2 7 3 6 4 5;
#X msg 85 474 traj set 1 2 3 4 5 6 7 8;
#X msg 85 500 active add 3;
#X msg 86 531 active del 3;
#X obj 54 566 zerr_envelopes~ trajectory circulation_8;
#X connect 0 0 1 0;
#X connect 1 0 31 2;
#X connect 2 0 3 0;
#X connect 3 0 31 1;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 14 0 12 0;
#X connect 18 0 21 0;
#X connect 19 0 2 0;
#X connect 20 0 4 0;
#X connect 20 0 31 0;
#X connect 21 0 0 0;
#X connect 27 0 31 0;
#X connect 28 0 31 0;
#X connect 29 0 31 0;
#X connect 30 0 31 0;
#X connect 31 0 16 0;
#X connect 31 1 16 1;
#X connect 31 2 16 2;
#X connect 31 3 16 3;
#X connect 31 4 16 4;
#X connect 31 5 16 5;
#X connect 31 6 16 6;
#X connect 31 7 16 7;
#X coords 0 916 1 915 85 60 0;
