#N canvas 2025 -430 936 1323 12;
#X floatatom 331 462 5 0 100 0 - - - 0;
#X obj 331 484 / 100;
#X floatatom 192 456 5 0 100 0 - - - 0;
#X obj 192 482 / 100;
#X obj 30 462 snapshot~;
#X obj 30 435 metro 100;
#X obj 30 411 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 30 495 vsl 19 162 0 1 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#N canvas 1709 -138 685 329 reference 0;
#X obj 18 52 cnv 5 550 5 empty empty INLET: 8 18 0 13 #202020 #000000 0;
#X obj 18 130 cnv 2 550 2 empty empty OUTLET: 8 12 0 13 #202020 #000000 0;
#X obj 17 174 cnv 2 550 2 empty empty ARGUMENTS: 8 12 0 13 #202020 #000000 0;
#X obj 18 219 cnv 5 550 5 empty empty empty 8 18 0 13 #202020 #000000 0;
#X text 90 152 ...;
#X obj 22 17 zerr_envelopes~ trajectory circulation_8;
#X text 311 17 - generate envelopes through different strategies;
#X text 90 134 signal - envelopes for each speaker;
#X text 112 178 symbol - the envelope generation strategy(trajectory/trigger), f 64;
#X text 112 197 symbol - speaker array configuration file path, f 64;
#X text 89 61 signal - trigger or trajectory mapping;
#X text 89 81 signal - spread parameter for sound width;
#X text 89 100 signal - overall envelopes gain;
#X restore 10 1062 pd reference;
#X text 104 1062 <= click;
#X obj 14 61 cnv 1 520 1 empty empty empty 8 12 0 13 #000000 #000000 0;
#X obj 9 1002 cnv 1 520 1 empty empty empty 8 12 0 13 #000000 #000000 0;
#X msg 422 453 \; pd dsp \$1;
#X text 460 423 DSP on/off;
#N canvas 2566 -231 499 459 set-dsp-tgl 0;
#X msg 241 138 set 0;
#X msg 182 109 set 1;
#X obj 182 172 s \$0-set-tgl;
#X obj 182 202 r \$0-tgl;
#X obj 182 246 outlet;
#X obj 105 106 tgl 20 0 \$0-tgl \$0-set-tgl empty 0 -10 0 12 #dfdfdf #000000 #000000 0 1;
#X text 28 17 This is a simple helper abstraction for the Pd docs that sets the toggle according to the DSP state., f 42;
#N canvas 172 166 401 276 pd-messages 0;
#X obj 101 75 inlet;
#X obj 101 133 pdcontrol;
#X msg 101 105 dir;
#X msg 101 163 \; pd open pd-messages.pd \$1;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X restore 237 389 pd pd-messages;
#X obj 182 80 receive pd-dsp-started;
#X obj 241 109 receive pd-dsp-stopped;
#X text 46 302 The trick is to rely on these messages sent by Pd. For more details on these and other messages that Pd sends or receives \, click here --->, f 39;
#X obj 237 353 bng 21 250 50 0 empty empty empty 0 -10 0 12 #dfdfdf #000000 #000000;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 8 0 1 0;
#X connect 9 0 0 0;
#X connect 11 0 7 0;
#X coords 0 -1 1 1 30 30 2 100 100;
#X restore 422 415 pd set-dsp-tgl;
#N canvas 504 119 1266 805 view 0;
#X obj 42 55 snapshot~;
#X obj 252 4 metro 100;
#X obj 327 122 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 111 121 vsl 19 162 0 1 0 0 empty empty 1 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 125 56 snapshot~;
#X obj 137 121 vsl 19 162 0 1 0 0 empty empty 2 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 211 57 snapshot~;
#X obj 163 121 vsl 19 162 0 1 0 0 empty empty 3 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 307 63 snapshot~;
#X obj 191 121 vsl 19 162 0 1 0 0 empty empty 4 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 400 64 snapshot~;
#X obj 220 121 vsl 19 162 0 1 0 0 empty empty 5 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 483 65 snapshot~;
#X obj 246 122 vsl 19 162 0 1 0 0 empty empty 6 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 569 66 snapshot~;
#X obj 271 122 vsl 19 162 0 1 0 0 empty empty 7 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 650 66 snapshot~;
#X obj 297 123 vsl 19 162 0 1 0 0 empty empty 8 0 -9 0 14 #fcfcfc #000000 #000000 0 1;
#X obj 562 246 inlet~;
#X obj 631 244 inlet~;
#X obj 1100 249 inlet~;
#X obj 1015 250 inlet~;
#X obj 920 248 inlet~;
#X obj 844 249 inlet~;
#X obj 780 248 inlet~;
#X obj 706 246 inlet~;
#X connect 0 0 3 0;
#X connect 1 0 0 0;
#X connect 1 0 4 0;
#X connect 1 0 6 0;
#X connect 1 0 8 0;
#X connect 1 0 10 0;
#X connect 1 0 12 0;
#X connect 1 0 14 0;
#X connect 1 0 16 0;
#X connect 2 0 1 0;
#X connect 4 0 5 0;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 14 0 15 0;
#X connect 16 0 17 0;
#X connect 18 0 0 0;
#X connect 19 0 4 0;
#X connect 20 0 16 0;
#X connect 21 0 14 0;
#X connect 22 0 12 0;
#X connect 23 0 10 0;
#X connect 24 0 8 0;
#X connect 25 0 6 0;
#X coords 0 -1 1 1 284 196 2 100 100;
#X restore 54 850 pd view;
#X text 307 31 - generate envelopes through different strategies;
#X obj 331 415 loadbang;
#X obj 192 429 loadbang;
#N canvas 157 38 1355 830 source 0;
#X obj 50 191 phasor~ 0.1;
#X msg 213 159 0;
#X obj 50 222 *~ 2;
#X obj 138 222 *~ 2;
#X obj 50 253 -~ 1;
#X obj 138 253 -~ 1;
#X obj 50 286 clip~ 0 1;
#X obj 138 286 clip~ 0 1;
#X obj 50 326 +~, f 13;
#X obj 67 152 * -1;
#X obj 138 191 phasor~ 0.1;
#X obj 49 123 / 100;
#X obj 213 129 loadbang;
#X obj 49 73 loadbang;
#X obj 50 357 outlet~;
#X msg 49 99 10;
#X connect 0 0 2 0;
#X connect 1 0 0 1;
#X connect 1 0 10 1;
#X connect 2 0 4 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 7 0 8 1;
#X connect 8 0 14 0;
#X connect 9 0 10 0;
#X connect 10 0 3 0;
#X connect 11 0 0 0;
#X connect 11 0 9 0;
#X connect 12 0 1 0;
#X connect 13 0 15 0;
#X connect 15 0 11 0;
#X restore 54 411 pd source signal;
#X msg 331 439 100;
#X text 12 245 Messages to set the trajectory vector \, set topological matrix \, active or disable speakers are available. (ps. the message functions are still in development.), f 74;
#X text 12 146 First argument chooses the envelope generation strategy: "trajectory" and "trigger". The second parameter is the path to the speaker array configuration file. It accepts .yaml file as input., f 74;
#X text 12 190 The number of outlets is automatically assigned by the speaker array configuration. It's equal to the number of speakers. The order of outlets is as same as the order of speakers. The outlets send envelope signals in audio rate., f 74;
#X text 12 65 The [zerr_envelopes~] generate envelopes according to input signals and the speaker array setups. All the input signals and output signals are in audio rate. The first inlet receives main input signal as trigger[0 or 1] or trajectory mapping[0.0 - 1.0]. The second inlet controls the spread parameter. How width the the sound distributed to. The third inlet controls the overall envelope gain., f 74;
#X text 12 286 In the help patch \, a source signal pendeling between 0 and 1 is generated. The [zerr_envelopes~] is in trajectory mode and uses a typical 8 speaker ring configuration. That connected in serial order in default. 1->2->3->4->5->6->7->8. For simplicity \, the spread and gain are linked to the float number. The envelope center moves from 1 to 8 when the source signal from 0 to 1.0. You can click on the set trajectory messages to change the mapping oder or use the active-speaker message to add/del speakers(buggy), f 74;
#X obj 54 809 zerr_envelopes~ trajectory circulation_8;
#X obj 15 32 zerr_envelopes~ trajectory circulation_8;
#X msg 105 635 print;
#X obj 291 580 loadbang;
#X msg 218 546 curr 4;
#X msg 291 610 interval 0;
#X text 105 610 Print current status;
#X text 218 520 Hard set the current active speaker;
#X text 291 551 The FadeIn/Out time in ms;
#X msg 404 620 topo set 1 2 \, topo set 2 4 \, topo set 3 5 7 \, topo set 4 1 \, topo set 5 2 \, topo set 6 4 \, topo set 7 8 \, topo set 8 1;
#X text 404 591 Set the topological connection between speakers;
#X msg 382 684 active del 3;
#X msg 482 684 active add 3;
#X text 382 659 active/deactive speakers;
#X msg 379 761 traj 1 8 2 7 3 6 4 5;
#X text 379 735 Set the trajectory connection;
#X msg 290 638 interval 50;
#X connect 0 0 1 0;
#X connect 1 0 26 2;
#X connect 2 0 3 0;
#X connect 3 0 26 1;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 14 0 12 0;
#X connect 17 0 20 0;
#X connect 18 0 2 0;
#X connect 19 0 4 0;
#X connect 19 0 26 0;
#X connect 20 0 0 0;
#X connect 26 0 15 0;
#X connect 26 1 15 1;
#X connect 26 2 15 2;
#X connect 26 3 15 3;
#X connect 26 4 15 4;
#X connect 26 5 15 5;
#X connect 26 6 15 6;
#X connect 26 7 15 7;
#X connect 28 0 26 0;
#X connect 29 0 31 0;
#X connect 30 0 26 0;
#X connect 31 0 26 0;
#X connect 35 0 26 0;
#X connect 37 0 26 0;
#X connect 38 0 26 0;
#X connect 40 0 26 0;
#X connect 42 0 26 0;
#X coords 0 1323 1 1322 85 60 0;
